<!doctype html>
<html>
<head>
<link href="all.css" media="screen" rel="stylesheet" type="text/css" /> 

<style>
#wrap{position:relative; padding:20px;} 
	#userW{border-radius: 5px; background-color:#ccc; padding:8px; margin:10px;}

#chat{ padding:8px;}
#sidebar{background-color:#333; color:#fff;}
#chat{background-color:#fff; color:#000; height:0px;}
#msgs{background-color:#ccc;}
.scroll{scroll:auto;}
.none{display:none;}
.cols{height:500px;}
</style>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="socket.io.js" type="text/javascript"></script>
<script type="text/javascript">

var Ns = {};
Ns.User ={name : ""};
NS.Chat = {update: function(msg){
	$("#msgs").append("<p>" + msgs + "</p>");
}};
jQuery(function($){
	$("#btnchat").click(function(){
		var user = ($("#name").val().trim().length > 0) && $("#name").val().trim();
		if(!user)
		return false;
	 	
		$("#users").append("<li>"+user+"</li>");
		$("#chat").animate({"height":"516"},500).find(".cols").removeClass("none");
		$("#userW").find(".loginW").hide();
	
		$("#sendbar").find(".cuser").html("@"+user).end().removeClass("none");
		
	});

	$("#btnsend").click(function(){
		//var msg = $("#msgnow`").val().trim.length >0) && $("#msgnow").val().trim();
		//if(!msg)
		//NS.Chat.update(msg);
		return false;
	});
});


var socket = new io.Socket(null, {rememberTransport: false, port: 8080});
socket.connect();
socket.addEvent('message', function(data) {
	//console.log("msg from server" + data);
	$('#msgs').append('<p>' + data + '</p>');
});

</script> 
</head>
<body>


<div id="wrap">

<div id= "userW">
<p class="loginW">
<label id="luser" for="name">your name</label>
<input type="text" id="name" />
<input type="submit" id="btnchat" />
</p>
<div id="sendbar" class="none">
	<h2 class="cuser none"></h2>
	<textarea id="msgnow"></textarea>
	<input id="btnsend" type="submit"/>
</div>
</div>
<div id="chat" class="line">
	<div id="msgs" class="unit size3of4 scroll none cols">
		<h2>chat session started now </h2>
	</div>
	<div id="sidebar" class="unit size1of4 scroll none cols">
		<h2>loading ...</h2>
		<ul id="users"></ul>
	</div>
</div
</div>
</body>
</html>
